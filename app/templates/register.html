<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Registro - AssetNext</title>
    <link
      rel="icon"
      type="image/jpeg"
      href="{{ url_for('static', filename='AssetNext.jpg') }}"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      body {
        font-family: 'DM Sans', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: radial-gradient(
            circle at 20% 80%,
            rgba(255, 215, 0, 0.1) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 80% 20%,
            rgba(255, 193, 7, 0.1) 0%,
            transparent 50%
          ),
          linear-gradient(
            135deg,
            #0a0a0a 0%,
            #1a1a1a 25%,
            #2a2a2a 50%,
            #1a1a1a 75%,
            #0a0a0a 100%
          );
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 10px;
        position: relative;
        overflow: hidden;
      }
      body::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: repeating-linear-gradient(
          45deg,
          transparent,
          transparent 2px,
          rgba(255, 215, 0, 0.03) 2px,
          rgba(255, 215, 0, 0.03) 4px
        );
        pointer-events: none;
      }
      .login-container {
        background: linear-gradient(
          145deg,
          #2a2a2a 0%,
          #1a1a1a 50%,
          #0a0a0a 100%
        );
        padding: 50px 42px;
        border-radius: 32px;
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.8),
          0 0 0 2px rgba(255, 215, 0, 0.3),
          inset 0 1px 2px rgba(255, 215, 0, 0.1),
          inset 0 -1px 2px rgba(0, 0, 0, 0.8);
        width: 100%;
        max-width: 700px;
        text-align: center;
        max-height: 700px;
        position: relative;
        overflow: hidden;
        border: 1px solid rgba(255, 215, 0, 0.2);
      }
      .login-container::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(
          90deg,
          #ffd700,
          #ffed4a,
          #f59e0b,
          #d97706,
          #ffd700
        );
        box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
      }
      .login-container::after {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(
          circle,
          rgba(255, 215, 0, 0.05) 0%,
          transparent 50%
        );
        animation: rotate 20s linear infinite;
        pointer-events: none;
      }
      @keyframes rotate {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }
      .logo {
        width: 90px;
        height: 90px;
        margin: 0 auto 25px;
        border-radius: 50%;
        background: linear-gradient(
            135deg,
            #1a1a1a 0%,
            #333 25%,
            #666 50%,
            #333 75%,
            #1a1a1a 100%
          ),
          radial-gradient(
            circle at 30% 30%,
            rgba(255, 215, 0, 0.3) 0%,
            transparent 50%
          );
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4),
          inset 0 2px 4px rgba(255, 215, 0, 0.2),
          inset 0 -2px 4px rgba(0, 0, 0, 0.3), 0 0 20px rgba(255, 215, 0, 0.1);
        border: 2px solid transparent;
        background-clip: padding-box;
        position: relative;
        overflow: hidden;
      }
      .logo::before {
        content: '';
        position: absolute;
        top: -2px;
        left: -2px;
        right: -2px;
        bottom: -2px;
        background: linear-gradient(135deg, #ffd700, #ffed4a, #f59e0b, #d97706);
        border-radius: 50%;
        z-index: -1;
        opacity: 0.8;
      }
      .logo::after {
        content: '';
        position: absolute;
        top: 15%;
        left: 15%;
        width: 30%;
        height: 30%;
        background: radial-gradient(
          circle,
          rgba(255, 255, 255, 0.3) 0%,
          transparent 70%
        );
        border-radius: 50%;
      }
      .logo img {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
        position: relative;
        z-index: 2;
      }
      .company-name {
        font-size: 1.8rem;
        font-weight: 800;
        color: #ffd700;
        margin-bottom: 10px;
        letter-spacing: 2px;
        text-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
      }
      h1 {
        font-size: 1.1rem;
        font-weight: 400;
        color: #e0c96a;
        margin-bottom: 18px;
        letter-spacing: 1px;
        text-shadow: none;
        opacity: 0.7;
      }
      .form-group {
        margin-bottom: 20px;
        text-align: left;
        position: relative;
        z-index: 2;
      }
      label {
        display: block;
        margin-bottom: 8px;
        color: #ffd700;
        font-weight: 600;
        font-size: 14px;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
      }
      input[type='email'],
      input[type='password'],
      input[type='text'],
      input[type='date'] {
        width: 98%;
        max-width: 540px;
        min-width: 0;
        padding: 10px 32px 12px 44px;
        border: 2px solid rgba(255, 215, 0, 0.3);
        border-radius: 10px;
        font-size: 16px;
        transition: all 0.3s ease;
        background: linear-gradient(145deg, #1a1a1a, #2a2a2a);
        color: #ffd700;
        box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.5),
          0 0 0 0 rgba(255, 215, 0, 0);
        box-sizing: border-box;
        display: block;
        margin-left: auto;
        margin-right: auto;
      }
      input[type='email']::placeholder,
      input[type='password']::placeholder,
      input[type='text']::placeholder {
        color: rgba(255, 215, 0, 0.5);
      }
      input[type='email']:focus,
      input[type='password']:focus,
      input[type='text']:focus,
      input[type='date']:focus {
        outline: none;
        border-color: #ffd700;
        background: linear-gradient(145deg, #2a2a2a, #1a1a1a);
        box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.5),
          0 0 0 3px rgba(255, 215, 0, 0.2), 0 0 10px rgba(255, 215, 0, 0.3);
        transform: translateY(-2px);
      }
      .login-btn {
        width: 100%;
        padding: 15px;
        background: linear-gradient(
          135deg,
          #bfa93a 0%,
          #e6d36a 25%,
          #b8860b 50%,
          #a67c1b 75%,
          #7c5209 100%
        );
        color: #181818;
        border: none;
        border-radius: 12px;
        font-size: 16px;
        font-weight: 800;
        cursor: pointer;
        transition: all 0.4s ease;
        margin-top: 15px;
        box-shadow: 0 4px 8px rgba(191, 169, 58, 0.25),
          inset 0 1px 2px rgba(255, 255, 255, 0.15),
          inset 0 -1px 2px rgba(0, 0, 0, 0.1);
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.12);
        text-transform: uppercase;
        letter-spacing: 1px;
        position: relative;
        z-index: 2;
        overflow: hidden;
      }
      .login-btn:disabled {
        opacity: 0.5;
        filter: grayscale(0.7);
        cursor: not-allowed;
        box-shadow: none;
      }
      .login-btn::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.2),
          transparent
        );
        transition: left 0.5s;
      }
      .login-btn:hover::before {
        left: 100%;
      }
      .login-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 16px rgba(191, 169, 58, 0.28),
          inset 0 1px 2px rgba(255, 255, 255, 0.18),
          inset 0 -1px 2px rgba(0, 0, 0, 0.12);
        background: linear-gradient(
          135deg,
          #e6d36a 0%,
          #bfa93a 25%,
          #b8860b 50%,
          #a67c1b 75%,
          #7c5209 100%
        );
      }
      .login-btn:active {
        transform: translateY(-1px);
        box-shadow: 0 5px 15px rgba(255, 215, 0, 0.4),
          inset 0 2px 4px rgba(0, 0, 0, 0.3);
      }
      .login-btn:active {
        transform: translateY(0);
      }
      .error-message {
        background: linear-gradient(135deg, #2a1a1a, #1a0a0a);
        color: #ff6b6b;
        padding: 12px;
        border-radius: 8px;
        margin: 15px 0;
        border-left: 4px solid #ff4757;
        font-size: 14px;
        border: 1px solid rgba(255, 71, 87, 0.3);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3),
          inset 0 1px 2px rgba(255, 107, 107, 0.1);
        position: relative;
        z-index: 2;
      }
      .links {
        margin-top: 25px;
        padding-top: 20px;
        border-top: 1px solid rgba(255, 215, 0, 0.2);
        position: relative;
        z-index: 2;
      }
      .links p {
        margin: 10px 0;
        color: rgba(255, 215, 0, 0.8);
        font-size: 14px;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
      }
      .links a {
        color: #ffd700;
        text-decoration: none;
        font-weight: 600;
        transition: all 0.3s ease;
        text-shadow: 0 0 5px rgba(255, 215, 0, 0.3);
      }
      .links a:hover {
        color: #ffed4a;
        text-decoration: underline;
        text-shadow: 0 0 10px rgba(255, 215, 0, 0.6);
      }
      @media (max-width: 480px) {
        .login-container {
          padding: 30px 20px;
          margin: 10px;
        }
        h1 {
          font-size: 24px;
        }
      }
      .input-icon {
        position: relative;
      }
      .input-icon::before {
        content: '';
        position: absolute;
        left: 12px;
        top: 50%;
        transform: translateY(-50%);
        width: 16px;
        height: 16px;
        opacity: 0.7;
        z-index: 1;
        filter: drop-shadow(0 0 2px rgba(255, 215, 0, 0.3));
      }
      .user-icon::before {
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="%23ffd700"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.121 17.804A9 9 0 1112 21a9 9 0 01-6.879-3.196z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/></svg>')
          no-repeat center;
      }
      .email-icon::before {
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="%23ffd700"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"/></svg>')
          no-repeat center;
      }
      .password-icon::before {
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="%23ffd700"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/></svg>')
          no-repeat center;
      }
    </style>
  </head>
  <body>
    <div class="login-container">
      <div class="logo">
        <img
          src="{{ url_for('static', filename='AssetNext.jpg') }}"
          alt="AssetNext Logo"
        />
      </div>
      <div class="company-name">AssetNext</div>
      <h1>Registrarse</h1>
      <form method="POST" id="registerForm" novalidate>
        <div
          class="form-columns"
          style="display: flex; gap: 24px; flex-wrap: wrap"
        >
          <div class="form-col" style="flex: 1 1 0; min-width: 0">
            <div class="form-group">
              <label for="nombre">Nombre</label>
              <div class="input-icon user-icon">
                <input
                  type="text"
                  id="nombre"
                  name="nombre"
                  required
                  placeholder="Tu nombre"
                />
              </div>
            </div>
            <div class="form-group">
              <label for="apellido">Apellido</label>
              <div class="input-icon user-icon">
                <input
                  type="text"
                  id="apellido"
                  name="apellido"
                  required
                  placeholder="Tu apellido"
                />
              </div>
            </div>
            <div class="form-group">
              <label for="fecha_nacimiento">Fecha de nacimiento</label>
              <div class="input-icon">
                <input
                  type="date"
                  id="fecha_nacimiento"
                  name="fecha_nacimiento"
                  required
                />
              </div>
            </div>
          </div>
          <div class="form-col" style="flex: 1 1 0; min-width: 0">
            <div class="form-group">
              <label for="email">Correo Electrónico</label>
              <div class="input-icon email-icon">
                <input
                  type="email"
                  id="email"
                  name="email"
                  required
                  placeholder="tu@email.com"
                />
              </div>
            </div>
            <div class="form-group">
              <label for="password">Contraseña</label>
              <div class="input-icon password-icon" style="position: relative">
                <input
                  type="password"
                  id="password"
                  name="password"
                  required
                  placeholder="••••••••"
                  style="padding-right: 44px"
                />
                <button
                  type="button"
                  id="togglePassword"
                  aria-label="Mostrar/Ocultar contraseña"
                  style="
                    position: absolute;
                    right: 10px;
                    top: 50%;
                    transform: translateY(-50%);
                    background: transparent;
                    border: none;
                    cursor: pointer;
                    padding: 0;
                    margin: 0;
                    z-index: 3;
                  "
                >
                  <svg
                    id="eyeIcon"
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="#ffd700"
                    stroke-width="2"
                  >
                    <path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12z" />
                    <circle cx="12" cy="12" r="3" />
                  </svg>
                </button>
              </div>
            </div>
            <div class="form-group">
              <label for="confirm_password">Confirmar Contraseña</label>
              <div class="input-icon password-icon" style="position: relative">
                <input
                  type="password"
                  id="confirm_password"
                  name="confirm_password"
                  required
                  placeholder="••••••••"
                  style="padding-right: 44px"
                />
                <button
                  type="button"
                  id="toggleConfirmPassword"
                  aria-label="Mostrar/Ocultar contraseña"
                  style="
                    position: absolute;
                    right: 10px;
                    top: 50%;
                    transform: translateY(-50%);
                    background: transparent;
                    border: none;
                    cursor: pointer;
                    padding: 0;
                    margin: 0;
                    z-index: 3;
                  "
                >
                  <svg
                    id="eyeIconConfirm"
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="#ffd700"
                    stroke-width="2"
                  >
                    <path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12z" />
                    <circle cx="12" cy="12" r="3" />
                  </svg>
                </button>
              </div>
            </div>
          </div>
        </div>
        <button type="submit" class="login-btn" id="registerBtn" disabled>
          Registrarse
        </button>
      </form>
      <div id="formErrors" style="margin-top: 16px"></div>
      {% if error %}
      <div class="error-message">{{ error }}</div>
      {% endif %} {% if success %}
      <div
        class="error-message"
        style="
          color: green;
          border-left: 4px solid #22c55e;
          border: 1px solid rgba(34, 197, 94, 0.3);
        "
      >
        {{ success }}
      </div>
      {% endif %}
      <div class="links">
        <p>
          ¿Ya tienes cuenta?
          <a href="{{ url_for('login') }}">Inicia sesión aquí</a>
        </p>
      </div>
    </div>
    <script>
      // Password toggle for main password
      const passwordInput = document.getElementById('password')
      const togglePassword = document.getElementById('togglePassword')
      const eyeIcon = document.getElementById('eyeIcon')
      let passwordVisible = false
      if (togglePassword) {
        togglePassword.addEventListener('click', function () {
          passwordVisible = !passwordVisible
          passwordInput.type = passwordVisible ? 'text' : 'password'
          eyeIcon.innerHTML = passwordVisible
            ? `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"#ffd700\" stroke-width=\"2\"><path d=\"M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12z\"/><circle cx=\"12\" cy=\"12\" r=\"3\"/><line x1=\"4\" y1=\"4\" x2=\"20\" y2=\"20\" stroke=\"#ffd700\" stroke-width=\"2\"/></svg>`
            : `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"#ffd700\" stroke-width=\"2\"><path d=\"M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12z\"/><circle cx=\"12\" cy=\"12\" r=\"3\"/></svg>`
        })
      }
      // Password toggle for confirm password
      const confirmPasswordInput = document.getElementById('confirm_password')
      const toggleConfirmPassword = document.getElementById(
        'toggleConfirmPassword'
      )
      const eyeIconConfirm = document.getElementById('eyeIconConfirm')
      let confirmPasswordVisible = false
      if (toggleConfirmPassword) {
        toggleConfirmPassword.addEventListener('click', function () {
          confirmPasswordVisible = !confirmPasswordVisible
          confirmPasswordInput.type = confirmPasswordVisible
            ? 'text'
            : 'password'
          eyeIconConfirm.innerHTML = confirmPasswordVisible
            ? `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"#ffd700\" stroke-width=\"2\"><path d=\"M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12z\"/><circle cx=\"12\" cy=\"12\" r=\"3\"/><line x1=\"4\" y1=\"4\" x2=\"20\" y2=\"20\" stroke=\"#ffd700\" stroke-width=\"2\"/></svg>`
            : `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"#ffd700\" stroke-width=\"2\"><path d=\"M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12z\"/><circle cx=\"12\" cy=\"12\" r=\"3\"/></svg>`
        })
      }
    </script>
    <script>
      // Validaciones de registro
      const form = document.getElementById('registerForm')
      const nombre = document.getElementById('nombre')
      const apellido = document.getElementById('apellido')
      const email = document.getElementById('email')
      const password = document.getElementById('password')
      const confirmPassword = document.getElementById('confirm_password')
      const fechaNacimiento = document.getElementById('fecha_nacimiento')
      const formErrors = document.getElementById('formErrors')

      function showError(input, message) {}
      function clearError(input) {}
      function validateEmail(email) {
        return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)
      }
      function validateName(name) {
        return /^[A-Za-zÁÉÍÓÚáéíóúÑñ ]+$/.test(name.trim())
      }
      function validatePassword(pw) {
        return /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]).{8,}$/.test(
          pw
        )
      }
      function validateFecha(fecha) {
        if (!fecha) return false
        const d = new Date(fecha)
        return !isNaN(d.getTime())
      }
      form.addEventListener('submit', function (e) {
        let valid = true
        formErrors.innerHTML = ''
        // Nombre
        clearError(nombre)
        if (!validateName(nombre.value)) {
          showError(nombre, 'Nombre solo puede contener letras y espacios.')
          valid = false
        }
        // Apellido
        clearError(apellido)
        if (!validateName(apellido.value)) {
          showError(apellido, 'Apellido solo puede contener letras y espacios.')
          valid = false
        }
        // Fecha nacimiento
        clearError(fechaNacimiento)
        if (!validateFecha(fechaNacimiento.value)) {
          showError(fechaNacimiento, 'Fecha de nacimiento inválida.')
          valid = false
        }
        // Email
        clearError(email)
        if (!validateEmail(email.value)) {
          showError(email, 'Correo electrónico inválido.')
          valid = false
        }
        // Password
        clearError(password)
        if (!validatePassword(password.value)) {
          showError(
            password,
            'Mínimo 8 caracteres, mayúscula, minúscula, número y símbolo.'
          )
          valid = false
        }
        // Confirmar password
        clearError(confirmPassword)
        if (password.value !== confirmPassword.value) {
          showError(confirmPassword, 'Las contraseñas no coinciden.')
          valid = false
        }
        const registerBtn = document.getElementById('registerBtn')
        function updateButtonState() {
          let valid = true
          // Nombre
          if (!validateName(nombre.value)) valid = false
          // Apellido
          if (!validateName(apellido.value)) valid = false
          // Fecha nacimiento
          if (!validateFecha(fechaNacimiento.value)) valid = false
          // Email
          if (!validateEmail(email.value)) valid = false
          // Password
          if (!validatePassword(password.value)) valid = false
          // Confirmar password
          if (password.value !== confirmPassword.value) valid = false
          registerBtn.disabled = !valid
        }
        // Validar en tiempo real
        ;[
          nombre,
          apellido,
          fechaNacimiento,
          email,
          password,
          confirmPassword
        ].forEach(input => {
          input.addEventListener('input', updateButtonState)
        })
        updateButtonState()
        if (!valid) {
          e.preventDefault()
        }
      })
    </script>
  </body>
</html>
